<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hard Maze Game</title>
<style>
  body {
    background: #eaeaea;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: 100vh;
    margin: 0;
  }
  canvas {
    background: #fff;
    border: 4px solid #222;
    touch-action: none;
  }
  #videoContainer {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
    z-index: 10;
  }
  #videoContainer video {
    max-width: 90%;
    max-height: 90%;
    border: 3px solid #fff;
    border-radius: 8px;
  }
  #controls {
    position: fixed;
    bottom: 20px;
    display: flex;
    justify-content: center;
    width: 100%;
    gap: 15px;
  }
  button {
    width: 60px;
    height: 60px;
    font-size: 25px;
    border: none;
    border-radius: 10px;
    background: #333;
    color: #fff;
  }
</style>
</head>
<body>

<canvas id="maze" width="600" height="600"></canvas>

<div id="videoContainer">
  <video id="finishVideo" src="play.mp4" controls></video>
</div>

<div id="controls">
  <button id="up">▲</button>
  <button id="left">◀</button>
  <button id="down">▼</button>
  <button id="right">▶</button>
</div>

<script>
const canvas = document.getElementById("maze");
const ctx = canvas.getContext("2d");
const videoContainer = document.getElementById("videoContainer");
const video = document.getElementById("finishVideo");

const cellSize = 40;
const rows = 15, cols = 15;

// Harder maze layout (1 = wall, 0 = path, 9 = goal)
const maze = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],
  [1,1,1,0,1,0,1,1,1,0,1,0,1,0,1],
  [1,0,0,0,0,0,0,0,1,0,0,0,1,0,1],
  [1,0,1,1,1,1,1,0,1,1,1,0,1,0,1],
  [1,0,1,0,0,0,1,0,0,0,1,0,0,0,1],
  [1,0,1,0,1,0,1,1,1,0,1,1,1,0,1],
  [1,0,1,0,1,0,0,0,0,0,0,0,1,0,1],
  [1,0,1,0,1,1,1,1,1,1,1,0,1,0,1],
  [1,0,1,0,0,0,0,1,0,0,0,0,1,0,1],
  [1,0,1,1,1,1,0,1,1,1,1,0,1,0,1],
  [1,0,0,0,0,1,0,0,0,1,0,0,1,0,1],
  [1,1,1,1,0,1,1,1,0,1,1,1,1,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,9,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let player = { x: 1, y: 1 };

function drawMaze() {
  for (let y = 0; y < rows; y++) {
    for (let x = 0; x < cols; x++) {
      if (maze[y][x] === 1) ctx.fillStyle = "#222";
      else if (maze[y][x] === 9) ctx.fillStyle = "gold";
      else ctx.fillStyle = "#fff";
      ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
      ctx.strokeStyle = "#ccc";
      ctx.strokeRect(x * cellSize, y * cellSize, cellSize, cellSize);
    }
  }

  // Player
  ctx.fillStyle = "red";
  ctx.fillRect(player.x * cellSize + 8, player.y * cellSize + 8, 24, 24);
}

function move(dx, dy) {
  const newX = player.x + dx;
  const newY = player.y + dy;
  if (maze[newY][newX] !== 1) {
    player.x = newX;
    player.y = newY;
  }

  if (maze[player.y][player.x] === 9) {
    finishGame();
  }

  drawMaze();
}

function finishGame() {
  videoContainer.style.display = "flex";
  video.play();
}

window.addEventListener("keydown", e => {
  if (e.key === "ArrowUp") move(0, -1);
  if (e.key === "ArrowDown") move(0, 1);
  if (e.key === "ArrowLeft") move(-1, 0);
  if (e.key === "ArrowRight") move(1, 0);
});

document.getElementById("up").addEventListener("click", () => move(0, -1));
document.getElementById("down").addEventListener("click", () => move(0, 1));
document.getElementById("left").addEventListener("click", () => move(-1, 0));
document.getElementById("right").addEventListener("click", () => move(1, 0));

drawMaze();
</script>

</body>
</html>
