<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive Maze Game</title>
<style>
  body {
    background: #eaeaea;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }
  canvas {
    background: #fff;
    border: 4px solid #222;
    touch-action: none;
    width: 90vw;
    height: 90vw;
    max-width: 600px;
    max-height: 600px;
  }
  #videoContainer {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
    z-index: 10;
  }
  #videoContainer video {
    max-width: 90%;
    max-height: 90%;
    border: 3px solid #fff;
    border-radius: 8px;
  }
  #controls {
    margin-top: 15px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
  }
  button {
    width: min(18vw, 80px);
    height: min(18vw, 80px);
    font-size: min(6vw, 28px);
    border: none;
    border-radius: 10px;
    background: #333;
    color: #fff;
  }
</style>
</head>
<body>

<canvas id="maze"></canvas>

<div id="videoContainer">
  <video id="finishVideo" src="play.mp4" controls></video>
</div>

<div id="controls">
  <button id="up">▲</button>
  <div style="display: flex; gap: 10px;">
    <button id="left">◀</button>
    <button id="down">▼</button>
    <button id="right">▶</button>
  </div>
</div>

<script>
const canvas = document.getElementById("maze");
const ctx = canvas.getContext("2d");
const videoContainer = document.getElementById("videoContainer");
const video = document.getElementById("finishVideo");

let rows = 15, cols = 15;
let maze = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],
  [1,1,1,0,1,0,1,1,1,0,1,0,1,0,1],
  [1,0,0,0,0,0,0,0,1,0,0,0,1,0,1],
  [1,0,1,1,1,1,1,0,1,1,1,0,1,0,1],
  [1,0,1,0,0,0,1,0,0,0,1,0,0,0,1],
  [1,0,1,0,1,0,1,1,1,0,1,1,1,0,1],
  [1,0,1,0,1,0,0,0,0,0,0,0,1,0,1],
  [1,0,1,0,1,1,1,1,1,1,1,0,1,0,1],
  [1,0,1,0,0,0,0,1,0,0,0,0,1,0,1],
  [1,0,1,1,1,1,0,1,1,1,1,0,1,0,1],
  [1,0,0,0,0,1,0,0,0,1,0,0,1,0,1],
  [1,1,1,1,0,1,1,1,0,1,1,1,1,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,9,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let player = { x: 1, y: 1 };

function drawMaze() {
  let cellSize = canvas.width / cols;
  for (let y = 0; y < rows; y++) {
    for (let x = 0; x < cols; x++) {
      if (maze[y][x] === 1) ctx.fillStyle = "#222";
      else if (maze[y][x] === 9) ctx.fillStyle = "gold";
      else ctx.fillStyle = "#fff";
      ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
      ctx.strokeStyle = "#ccc";
      ctx.strokeRect(x * cellSize, y * cellSize, cellSize, cellSize);
    }
  }

  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(
    player.x * cellSize + cellSize / 2,
    player.y * cellSize + cellSize / 2,
    cellSize / 3,
    0,
    Math.PI * 2
  );
  ctx.fill();
}

function move(dx, dy) {
  const newX = player.x + dx;
  const newY = player.y + dy;
  if (maze[newY][newX] !== 1) {
    player.x = newX;
    player.y = newY;
  }

  if (maze[player.y][player.x] === 9) {
    videoContainer.style.display = "flex";
    video.play();
  }

  drawMaze();
}

function resizeCanvas() {
  const size = Math.min(window.innerWidth * 0.9, window.innerHeight * 0.7);
  canvas.width = size;
  canvas.height = size;
  drawMaze();
}

window.addEventListener("resize", resizeCanvas);
window.addEventListener("keydown", e => {
  if (e.key === "ArrowUp") move(0, -1);
  if (e.key === "ArrowDown") move(0, 1);
  if (e.key === "ArrowLeft") move(-1, 0);
  if (e.key === "ArrowRight") move(1, 0);
});

document.getElementById("up").addEventListener("click", () => move(0, -1));
document.getElementById("down").addEventListener("click", () => move(0, 1));
document.getElementById("left").addEventListener("click", () => move(-1, 0));
document.getElementById("right").addEventListener("click", () => move(1, 0));

resizeCanvas();
</script>

</body>
</html>
